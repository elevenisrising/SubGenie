[English](README.md) | [??](README.zh.md)

# SubGenie - AI ??????

SubGenie ???????????????????????????????????????? WhisperX ?????? spaCy ?????????????

## ????
- **????**??? GPU ? WhisperX?PyTorch CUDA 12.1??????????????????
- **????**????? spaCy (`en_core_web_sm`) ???????????
- **?????**????? LLM?Ollama?????? API???? 700+ ??/???????
- **?????**????? SRT/VTT/ASS/TXT/JSON???????????
- **GUI + CLI**?CustomTkinter ??????????????????

## ????
- Windows 10/11???????? NVIDIA GPU?CUDA 12.1 ????????????
- ?? [Miniconda/Anaconda](https://docs.conda.io/en/latest/miniconda.html) ??? `asr-env` ???
- ?????????? ASR/????? Hugging Face ???

> ??? `environment/conda-env.yml` ?????????????? FFmpeg 6.1.1?CUDA 12.9 ???cuDNN 8.9.7 ???? Python ????

## Conda ??????
```powershell
# 1. ????????? GUI ?????????
d:
cd D:\Dream\translate
conda env create -p .conda\asr-env -f environment\conda-env.yml

# 2. ?????? pip ??
d:\Dream\translate> conda run -p .conda\asr-env python -m pip install -r requirements.txt

# 3. ?? GUI????? PATH ? FFmpeg?
start_gui.bat
```

`start_gui.bat` ????? `D:\Dream\translate\.conda\asr-env`??? `Library\bin` ?? `PATH` ????????? FFmpeg/CUDA DLL????? `conda run -p ... python main_gui.py` ?????

### CLI ????
```powershell
# WhisperX + spaCy ?????
conda run -p .conda\asr-env python src/processing/main.py ^
  input_audio\100k.mp4 ^
  --model medium ^
  --output_format source ^
  --segmentation_strategy spacy ^
  --word_timestamps

# ????????
D:\Dream\translate\.conda\asr-env\python.exe -u src/processing/main.py ^
  input_audio\example.mp4 ^
  --model large-v3 ^
  --target_language zh-CN ^
  --output_format bilingual ^
  --word_timestamps
```
?? `--word_timestamps` ?????????????????? spaCy ??????????

## ??????
1. **????** - Conda ???? FFmpeg ?????? WAV ???
2. **????** - WhisperX ? CUDA 12.1 ?????????? `medium`??
3. **????** - WhisperX ???????????
4. **????** - `src/processing/segmentation.py` ?? spaCy??????????
5. **????** - `generate_segments_with_alignment` ??????????
6. **????** - ?? `--max_subtitle_chars`???????????????

## ????/??
- ??????????????
  ```powershell
  conda env export -p D:\Dream\translate\.conda\asr-env --no-builds > environment\conda-env.yml
  conda run -p D:\Dream\translate\.conda\asr-env python -m pip freeze > requirements.txt
  ```
- ?????????????? YAML ??????? Conda ??????? `.conda\asr-env` ??????????????

## ????
- **??? spaCy ??**??? `conda run -p .conda\asr-env python -m spacy download en_core_web_sm`?
- **GPU ????**??? NVIDIA ???? CUDA 12.1???? CPU ????? CPU ? PyTorch?
- **FFmpeg ????**????? `start_gui.bat` ????? PATH ?????? DLL?
- **Pyannote ??**????????? Torch/pyannote ?????????????????????

## ????
```
assets/               # ?????
core/                 # GUI ????
environment/          # ??????
 gui/                  # CustomTkinter ????
input_audio/          # ??????
output_subtitles/     # ?????????????
scripts/              # ??/CLI ????
src/                  # ???????
start_gui.bat         # Windows GUI ???
```

## ???
?? [LICENSE](../LICENSE)?

